#YikYak Beta API

##Rate Limiting
The API is rate limited to 30 requests per 60 seconds. Breaching this limit will cause the server to return an `HTTP 429` code, so take it slow.

##Objects

###Yakker
JSON object representing a YikYak user

|Key|Value|Notes
|---|---|---
|`amplitudeID`|string|Not needed
|`myHerd`|Herd|See below
|`userID`|string
|`verificationStatus`|Verification|See below
|`yakarma`|int
|**myHerd**
|`eligible`|boolean
|`enabled`|boolean
|`lat`|string
|`long`|string
|`name`|string
|**verificationStatus**
|`forceVerification`|boolean
|`isVerified`|boolean

###Yak
JSON object representing a Yak (known as messages in the API)

|Key|Value|Notes
|---|---|---
|`canDownVote`|bool
|`canReply`|bool|
|`canReport`|int|`0` or `1`
|`canUpVote`|bool
|`canVote`|bool
|`comments`|int|Number of comments
|`deliveryID`|int|Inverse position in list (i.e. 0 at bottom)
|`gmt`|float
|`handle`|???|Always seems to be None
|`hidePin`|int|`0` or `1`
|`latitude`|float|Yak latitude to 2dp
|`liked`|int|`0` or `1`
|`location`|dict|Appears to be always empty
|`locationDisplayStyle`|int|Always `0`
|`locationName`|string
|`longitude`|float|Yak long to 2 decimal places
|`message`|string|Yak contents
|`messageID`|string|ID of Yak
|`numberOfLikes`|int|Current Yak score
|`posterID`|string|
|`readOnly`|int|`0` or `1`
|`reyaked`|int|`0` or `1`
|`score`|float
|`time`|timestamp|`YYYY-MM-DD HH:MM:SS`
|`type`|int|`0` = text; `6` = image
|**Image Yaks Only**
|`expandInFeed`|int|Always `1`
|`imageHeight`|int|Pixel height
|`imageWidth`|int|Pixel width
|`thumbNailUrl`|url|Link to thumb
|`url`|url|Link to full size

###Comment
|Key|Value|Notes
|---|---|---
|`backID`|string|Icon background
|`comment`|string|Comment body
|`commentID`|string
|`deliveryID`|int
|`gmt`|float
|`isDeleted`|bool
|`liked`|int|`0` or `1`
|`messageID`|string|ID of parent Yak
|`numberOfLikes`|int
|`overlayID`|string|Icon
|`posterID`|string
|`time`|timestamp|`YYYY-MM-DD HH:MM:SS`

##API Actions
###Initialise Pairing
To login to the web API we need a 6 digit PIN generated by the mobile app. If you know your Yik Yak user ID, we can request the PIN from the API to avoid manually checking the app.

**URL:** `https://beta.yikyak.com/api/auth/initPairing`
**Method: ** `POST`

**Request Body**
|Key|Type|Description
|---|---|---
|`userID`|string|User's ID string

**Response**
|Key|Type|Description
|---|---|---
|`ttl`|integer|Number of seconds the PIN is valid for
|`pin`|string|6 digit validation PIN

```
{
    'ttl': 60,
    'pin': '110786'
}
```

###Pair
**URL:** `https://beta.yikyak.com/api/auth/pair`
**Type:** POST

**Request Parameters**
|Key|Type
|---|---|---
|`countryCode`|String
|`phoneNumber`|String
|`pin`|String

**Response**
Authentication cookie split into individual characters

###Yakker
**URL:** `https://beta.yikyak.com/api/proxy/v1/yakker`
**Type:** `GET`

**Response**

|Key|Value
|---|---
|`myHerd`|Herd object
|`yakarma`|Integer
|`verificationStatus`|Verification object
|`userID`|string
|`amplitudeID`|string


###New / Hot Yak Feed
**URL: ** `https://beta.yikyak.com/api/proxy/v1/messages/all/new`
**URL: ** `https://beta.yikyak.com/api/proxy/v1/messages/all/hot`
**Method: ** `GET`

**Request Headers**
|Key|Type|Value
|---|---|---
|`Referer`|string|`https://beta.yikyak.com/`
|`x-access-token`|string|Authentication token from pairing

**Request Parameters**
|Key|Type|Value
|---|---|---
|`userLat`|float|User's latitude
|`userLong`|float|User's longitude
|`lat`|float|Yak latitude (match `userLat`)
|`long`|float|Yak longitude (match `userLong`)
|`myHerd`|int|`0` or `1`

**Response**
Returns 200 Yak objects

###Upvoting / Downvoting a Yak

**URL:** `https://beta.yikyak.com/api/proxy/v1/messages/<yak_id>/upvote`
**URL:** `https://beta.yikyak.com/api/proxy/v1/messages/<yak_id>/downvote`
**Method:** `PUT`

**Request Headers**
|Key|Type|Value
|---|---|---
|`Referer`|string|`https://beta.yikyak.com/`
|`x-access-token`|string|Authentication token from pairing

**Request Parameters**
|Key|Value
|---|---
|`userLat`|float
|`userLong`|float
|`myHerd`|int
